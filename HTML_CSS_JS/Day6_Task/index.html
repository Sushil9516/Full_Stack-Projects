<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vastra - Online Shopping</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body>
    <div id="authContainer" class="auth-container">
      <div id="registerContainer" class="form-container">
        <h2>Register</h2>
        <input type="text" id="regName" placeholder="Name" required />
        <input type="email" id="regEmail" placeholder="Email" required />
        <div class="password-container">
          <input
            type="password"
            id="regPassword"
            placeholder="Password"
            required
          />
          <span class="toggle-password" onclick="togglePassword('regPassword')"
            >üëÅÔ∏è</span
          >
        </div>
        <input
          type="text"
          id="regImg"
          placeholder="Profile Image URL"
          required
        />
        <button onclick="register()">Register</button>
        <p>
          Already have an account?
          <span class="link" onclick="toggleForms('login')">Login here</span>
        </p>
      </div>

      <div id="loginContainer" class="form-container">
        <h2>Login</h2>
        <input type="email" id="logEmail" placeholder="Email" required />
        <div class="password-container">
          <input
            type="password"
            id="logPassword"
            placeholder="Password"
            required
          />
          <span class="toggle-password" onclick="togglePassword('logPassword')"
            >üëÅÔ∏è</span
          >
        </div>
        <button onclick="login()">Login</button>
        <p>
          Don't have an account?
          <span class="link" onclick="toggleForms('register')"
            >Register here</span
          >
        </p>
      </div>
    </div>

    <div id="mainContent" style="display: none">
      <nav id="nav-bar">
        <div class="nav-left">
          <span class="logo">Vastra</span>
          <a href="#" onclick="goToProductListings()">Product Listings</a>
          <select id="categoryFilter" onchange="filterByCategory()">
            <option value="">All Categories</option>
          </select>
        </div>
        <div class="nav-center">
          <input
            type="text"
            id="searchInput"
            placeholder="Search for products, brands and more"
            onkeyup="searchProducts()"
          />
          <i class="fas fa-search search-icon"></i>
        </div>
        <div class="nav-right">
          <div class="nav-item">
            <img id="userImg" src="" alt="User" class="user-img" />
            <span id="userName"></span>
            <button onclick="logout()">Logout</button>
          </div>
          <div class="nav-item cart-wishlist-item" onclick="viewWishlist()">
            <i class="far fa-heart"></i>
            <span>Wishlist</span>
            <span id="wishlistCount" class="count">0</span>
          </div>
          <div class="nav-item cart-wishlist-item" onclick="viewCart()">
            <i class="fas fa-shopping-bag"></i>
            <span>Bag</span>
            <span id="cartCount" class="count">0</span>
          </div>
        </div>
      </nav>

      <div id="productListings" class="product-listings-container"></div>

      <div
        id="productDetailContainer"
        class="product-detail-container"
        style="display: none"
      ></div>

      <div id="cartContainer" class="cart-container" style="display: none">
        <h2>Your Bag</h2>
        <div id="cartItemsWrapper" class="cart-items-wrapper"></div>
        <div id="cartSummary" class="checkout-summary"></div>
      </div>

      <div
        id="wishlistContainer"
        class="wishlist-container"
        style="display: none"
      >
        <h2>Your Wishlist</h2>
        <div id="wishlistItemsWrapper" class="wishlist-items-wrapper"></div>
        <button onclick="goToProductListings()">Continue Shopping</button>
      </div>

      <div
        id="checkoutContainer"
        class="checkout-container"
        style="display: none"
      >
        <h2>Checkout</h2>
        <div class="checkout-sections">
          <div class="checkout-section delivery-address">
            <h3>Select Delivery Address</h3>
            <button
              class="add-new-address-btn"
              onclick="toggleAddAddressForm(true)"
            >
              ADD NEW ADDRESS
            </button>
            <div
              id="newAddressForm"
              class="new-address-form"
              style="display: none"
            >
              <h4>Add New Address</h4>
              <input
                type="text"
                id="addressName"
                placeholder="Name (e.g., Home, Work)"
                required
              />
              <input
                type="text"
                id="addressLine1"
                placeholder="Address Line 1"
                required
              />
              <input
                type="text"
                id="addressLine2"
                placeholder="Address Line 2 (Optional)"
              />
              <input type="text" id="addressCity" placeholder="City" required />
              <input
                type="text"
                id="addressState"
                placeholder="State"
                required
              />
              <input
                type="text"
                id="addressPincode"
                placeholder="Pincode"
                required
              />
              <input
                type="text"
                id="addressMobile"
                placeholder="Mobile Number"
                required
              />
              <button onclick="saveNewAddress()">Save Address</button>
              <button onclick="toggleAddAddressForm(false)" class="cancel-btn">
                Cancel
              </button>
            </div>
            <div
              id="userAddressesContainer"
              class="user-addresses-container"
            ></div>
          </div>

          <div class="checkout-section payment-method">
            <h3>Choose Payment Mode</h3>
            <div class="payment-tabs">
              <button class="payment-tab-btn active" data-payment-mode="cod">
                Cash On Delivery
              </button>
              <button class="payment-tab-btn" data-payment-mode="card">
                Credit/Debit Card
              </button>
              <button class="payment-tab-btn" data-payment-mode="phonepe">
                PhonePe/Google
              </button>
              <button class="payment-tab-btn" data-payment-mode="paytm">
                Paytm/Wallets
              </button>
              <button class="payment-tab-btn" data-payment-mode="netbanking">
                Net Banking
              </button>
              <button class="payment-tab-btn" data-payment-mode="emi">
                EMI/Pay Later
              </button>
            </div>

            <div id="paymentDetailsCod" class="payment-details-content">
              <p>Pay On Delivery (Cash/UPI)</p>
              <div class="captcha-container">
                <span id="codCaptchaCode" class="captcha-code"></span>
                <input
                  type="text"
                  id="codCaptchaInput"
                  placeholder="Enter the above"
                  required
                />
                <button onclick="generateCodCaptcha()">Refresh CAPTCHA</button>
              </div>
              <p class="cod-info">
                You can pay via Cash or UPI at time of delivery.
              </p>
            </div>
            <div
              id="paymentDetailsCard"
              class="payment-details-content"
              style="display: none"
            >
              <p>Credit/Debit Card payment is simulated.</p>
              <p>This is a demo. No real card details will be processed.</p>
            </div>
            <div
              id="paymentDetailsPhonepe"
              class="payment-details-content"
              style="display: none"
            >
              <p>PhonePe/Google Pay payment is simulated.</p>
              <p>This is a demo. No real payment will be processed.</p>
            </div>
            <div
              id="paymentDetailsPaytm"
              class="payment-details-content"
              style="display: none"
            >
              <p>Paytm/Wallets payment is simulated.</p>
              <p>This is a demo. No real payment will be processed.</p>
            </div>
            <div
              id="paymentDetailsNetbanking"
              class="payment-details-content"
              style="display: none"
            >
              <p>Net Banking payment is simulated.</p>
              <p>This is a demo. No real payment will be processed.</p>
            </div>
            <div
              id="paymentDetailsEmi"
              class="payment-details-content"
              style="display: none"
            >
              <p>EMI/Pay Later payment is simulated.</p>
              <p>This is a demo. No real payment will be processed.</p>
            </div>

            <button class="place-order-btn" onclick="placeOrder()">
              Place Order
            </button>
          </div>

          <div class="checkout-section price-details-summary">
            <h3>Price Details (<span id="checkoutItemCount">0</span> items)</h3>
            <p>
              Total MRP
              <span class="price-value" id="checkoutTotalMRP">‚Çπ0.00</span>
            </p>
            <p>
              Discount on MRP
              <span class="price-value discount-value" id="checkoutDiscountMRP"
                >- ‚Çπ0.00</span
              >
            </p>
            <p>
              Convenience Fee
              <span class="price-value free-value" id="checkoutConvenienceFee"
                >‚Çπ FREE</span
              >
            </p>
            <hr />
            <h4>
              Total Amount
              <span
                class="price-value total-amount-value"
                id="checkoutTotalAmount"
                >‚Çπ0.00</span
              >
            </h4>
          </div>
        </div>
      </div>

      <div
        id="orderConfirmationContainer"
        class="order-confirmation-container"
        style="display: none"
      >
        <div class="confirmation-message">
          <i class="fas fa-check-circle checkmark-icon"></i>
          <h2>Your order has placed</h2>
          <p>Thank you for shopping!</p>
          <button onclick="goToProductListings()">SHOP MORE</button>
        </div>
      </div>
    </div>

    <div class="modal-overlay" style="display: none"></div>
    <div class="modal" style="display: none">
      <h3 id="modalTitle"></h3>
      <div id="modalContent"></div>
      <button onclick="closeModal()">Close</button>
    </div>

    <script src="script.js"></script>
  </body>
</html>
